--// JUMPSCARE SCRIPT (IMAGE + DARK ENV | NO SOUND | WITH HOOK)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- ===== CONFIG =====
local IMAGE_ID = "rbxassetid://140575828191525"
local JUMPSCARE_DURATION = 1 -- thá»i gian jumpscare (giÃ¢y)
-- ==================

-- ===== SAVE ORIGINAL LIGHTING =====
local originalLighting = {
	Brightness = Lighting.Brightness,
	Ambient = Lighting.Ambient,
	OutdoorAmbient = Lighting.OutdoorAmbient,
	FogEnd = Lighting.FogEnd,
	FogStart = Lighting.FogStart,
	FogColor = Lighting.FogColor,
}

local originalCC
for _, v in ipairs(Lighting:GetChildren()) do
	if v:IsA("ColorCorrectionEffect") then
		originalCC = v:Clone()
	end
end

-- ===== APPLY DARK ENVIRONMENT =====
Lighting.Brightness = 0
Lighting.Ambient = Color3.new(0, 0, 0)
Lighting.OutdoorAmbient = Color3.new(0, 0, 0)
Lighting.FogStart = 0
Lighting.FogEnd = 50
Lighting.FogColor = Color3.new(0, 0, 0)

local cc = Instance.new("ColorCorrectionEffect")
cc.Name = "JumpScareCC"
cc.Contrast = 1
cc.Saturation = -1
cc.Brightness = -0.2
cc.Parent = Lighting

-- ===== GUI =====
local gui = Instance.new("ScreenGui")
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

local img = Instance.new("ImageLabel")
img.AnchorPoint = Vector2.new(0.5, 0.5)
img.Position = UDim2.fromScale(0.5, 0.5)
img.Size = UDim2.fromScale(0.3, 0.3)
img.BackgroundTransparency = 1
img.Image = IMAGE_ID
img.ScaleType = Enum.ScaleType.Fit
img.Parent = gui

-- =====================================================
-- ðŸ”— HOOK: SCRIPT PHá»¤ (CHáº Y NGAY KHI JUMPSCARE Báº®T Äáº¦U)
-- =====================================================
task.spawn(function()
	-- â¬‡â¬‡â¬‡ DÃN SCRIPT PHá»¤ Cá»¦A Báº N VÃ€O ÄÃ‚Y â¬‡â¬‡â¬‡
	-- vÃ­ dá»¥:
	-- game.Workspace.Gravity = 0
	-- print("Jumpscare hook activated")
 function GitAud(soundgit,filename)
    SoundName=tostring(SoundName)
    local url=soundgit
    local FileName = filename
    writefile(FileName..".mp3", game:HttpGet(url))
    return (getcustomasset or getsynasset)(FileName..".mp3")
end

function CustomGitSound(soundlink, vol, filename)
    local sound = Instance.new("Sound")
    sound.SoundId = GitAud(soundlink, filename)
    sound.Parent = workspace
    sound.Name = "TAKLJUMP"
    sound.Volume = 1
   sound:Play()
end

CustomGitSound("https://github.com/Guestly-V2-2/Music-Sound/raw/refs/heads/main/lv_0_20260104130055.mp3?raw=true", 1, " TAKLJUMP")

wait(4)
game.Workspace.TAKLJUMP:Destroy()
end)

-- ===== SHAKE + TIMER =====
local startTime = tick()
local shakeStrength = 6
local conn

conn = RunService.RenderStepped:Connect(function()
	if tick() - startTime >= JUMPSCARE_DURATION then
		-- CLEANUP
		conn:Disconnect()
		gui:Destroy()

		-- RESTORE LIGHTING
		for k, v in pairs(originalLighting) do
			Lighting[k] = v
		end

		if cc then cc:Destroy() end
		if originalCC then originalCC.Parent = Lighting end

		return
	end

	local x = math.random(-shakeStrength, shakeStrength)
	local y = math.random(-shakeStrength, shakeStrength)
	img.Position = UDim2.fromScale(0.5, 0.5) + UDim2.fromOffset(x, y)
end)

game.ReplicatedStorage.GameData.LatestRoom.Changed:Wait()

--// JUMPSCARE SCRIPT (IMAGE + DARK ENV | NO SOUND | WITH HOOK)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- ===== CONFIG =====
local IMAGE_ID = "rbxassetid://140575828191525"
local JUMPSCARE_DURATION = 1 -- thá»i gian jumpscare (giÃ¢y)
-- ==================

-- ===== SAVE ORIGINAL LIGHTING =====
local originalLighting = {
	Brightness = Lighting.Brightness,
	Ambient = Lighting.Ambient,
	OutdoorAmbient = Lighting.OutdoorAmbient,
	FogEnd = Lighting.FogEnd,
	FogStart = Lighting.FogStart,
	FogColor = Lighting.FogColor,
}

local originalCC
for _, v in ipairs(Lighting:GetChildren()) do
	if v:IsA("ColorCorrectionEffect") then
		originalCC = v:Clone()
	end
end

-- ===== APPLY DARK ENVIRONMENT =====
Lighting.Brightness = 0
Lighting.Ambient = Color3.new(0, 0, 0)
Lighting.OutdoorAmbient = Color3.new(0, 0, 0)
Lighting.FogStart = 0
Lighting.FogEnd = 50
Lighting.FogColor = Color3.new(0, 0, 0)

local cc = Instance.new("ColorCorrectionEffect")
cc.Name = "JumpScareCC"
cc.Contrast = 1
cc.Saturation = -1
cc.Brightness = -0.2
cc.Parent = Lighting

-- ===== GUI =====
local gui = Instance.new("ScreenGui")
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

local img = Instance.new("ImageLabel")
img.AnchorPoint = Vector2.new(0.5, 0.5)
img.Position = UDim2.fromScale(0.5, 0.5)
img.Size = UDim2.fromScale(0.6, 0.6)
img.BackgroundTransparency = 1
img.Image = IMAGE_ID
img.ScaleType = Enum.ScaleType.Fit
img.Parent = gui

-- =====================================================
-- ðŸ”— HOOK: SCRIPT PHá»¤ (CHáº Y NGAY KHI JUMPSCARE Báº®T Äáº¦U)
-- =====================================================
task.spawn(function()
	-- â¬‡â¬‡â¬‡ DÃN SCRIPT PHá»¤ Cá»¦A Báº N VÃ€O ÄÃ‚Y â¬‡â¬‡â¬‡
	-- vÃ­ dá»¥:
	-- game.Workspace.Gravity = 0
	-- print("Jumpscare hook activated")
 function GitAud(soundgit,filename)
    SoundName=tostring(SoundName)
    local url=soundgit
    local FileName = filename
    writefile(FileName..".mp3", game:HttpGet(url))
    return (getcustomasset or getsynasset)(FileName..".mp3")
end

function CustomGitSound(soundlink, vol, filename)
    local sound = Instance.new("Sound")
    sound.SoundId = GitAud(soundlink, filename)
    sound.Parent = workspace
    sound.Name = "TAKLJUMP"
    sound.Volume = 1
   sound:Play()
end

CustomGitSound("https://github.com/Guestly-V2-2/Music-Sound/raw/refs/heads/main/lv_0_20260104130055.mp3?raw=true", 1, " TAKLJUMP")

wait(4)
game.Workspace.TAKLJUMP:Destroy()
end)

-- ===== SHAKE + TIMER =====
local startTime = tick()
local shakeStrength = 6
local conn

conn = RunService.RenderStepped:Connect(function()
	if tick() - startTime >= JUMPSCARE_DURATION then
		-- CLEANUP
		conn:Disconnect()
		gui:Destroy()

		-- RESTORE LIGHTING
		for k, v in pairs(originalLighting) do
			Lighting[k] = v
		end

		if cc then cc:Destroy() end
		if originalCC then originalCC.Parent = Lighting end

		return
	end

	local x = math.random(-shakeStrength, shakeStrength)
	local y = math.random(-shakeStrength, shakeStrength)
	img.Position = UDim2.fromScale(0.5, 0.5) + UDim2.fromOffset(x, y)
end)

game.ReplicatedStorage.GameData.LatestRoom.Changed:Wait()

--// ADVANCED JUMPSCARE (2 IMAGES | FADE | SHAKE | DARK ENV | CLEAN STATE)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- ===== CONFIG =====
local IMAGE_MAIN = "rbxassetid://140575828191525"
local IMAGE_SUB  = "rbxassetid://103186358600129" -- ðŸ‘ˆ áº¢NH THá»¨ 2

local FADE_MAIN = 5
local FADE_SUB  = 7 -- cháº­m hÆ¡n 2 giÃ¢y

local SHAKE_MAIN = 12
local SHAKE_SUB  = 6
-- ==================

-- ===== STATE =====
_G.JumpScareActive = true

-- ===== SAVE LIGHTING =====
local original = {
	Brightness = Lighting.Brightness,
	Ambient = Lighting.Ambient,
	OutdoorAmbient = Lighting.OutdoorAmbient,
	FogStart = Lighting.FogStart,
	FogEnd = Lighting.FogEnd,
	FogColor = Lighting.FogColor,
}

-- ===== DARK ENV =====
Lighting.Brightness = 0
Lighting.Ambient = Color3.new(0,0,0)
Lighting.OutdoorAmbient = Color3.new(0,0,0)
Lighting.FogStart = 0
Lighting.FogEnd = 60
Lighting.FogColor = Color3.new(0,0,0)

local cc = Instance.new("ColorCorrectionEffect")
cc.Contrast = 1
cc.Saturation = -1
cc.Brightness = -0.3
cc.Parent = Lighting

-- ===== GUI =====
local gui = Instance.new("ScreenGui")
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = playerGui

-- ===== IMAGE 1 (MAIN) =====
local img1 = Instance.new("ImageLabel")
img1.AnchorPoint = Vector2.new(0.5, 0.5)
img1.Position = UDim2.fromScale(0.5, 0.5)
img1.Size = UDim2.fromScale(0.75, 0.75)
img1.BackgroundTransparency = 1
img1.Image = IMAGE_MAIN
img1.ScaleType = Enum.ScaleType.Fit
img1.Parent = gui

local ar1 = Instance.new("UIAspectRatioConstraint")
ar1.AspectType = Enum.AspectType.ScaleWithParentSize
ar1.Parent = img1

-- ===== IMAGE 2 (SUB â€“ DÆ¯á»šI MÃ€N HÃŒNH) =====
local img2 = Instance.new("ImageLabel")
img2.AnchorPoint = Vector2.new(0.5, 1)
img2.Position = UDim2.fromScale(0.5, 0.95)
img2.Size = UDim2.fromScale(0.55, 0.55)
img2.BackgroundTransparency = 1
img2.Image = IMAGE_SUB
img2.ScaleType = Enum.ScaleType.Fit
img2.Parent = gui

local ar2 = Instance.new("UIAspectRatioConstraint")
ar2.AspectType = Enum.AspectType.ScaleWithParentSize
ar2.Parent = img2

local HookExecuted = false

-- =====================================================
-- ðŸ”— HOOK â€“ CHáº Y 1 Láº¦N DUY NHáº¤T
-- =====================================================
task.spawn(function()
	if HookExecuted then return end
	HookExecuted = true

	-- ===== SCRIPT PHá»¤ =====
	local function GitAud(soundgit, filename)
		local url = soundgit
		writefile(filename .. ".mp3", game:HttpGet(url))
		return (getcustomasset or getsynasset)(filename .. ".mp3")
	end

	local function CustomGitSound(soundlink, vol, filename)
		local sound = Instance.new("Sound")
		sound.SoundId = GitAud(soundlink, filename)
		sound.Parent = workspace
		sound.Name = "FINALJUMP"
		sound.Volume = vol or 1
		sound:Play()
	end

	CustomGitSound(
		"https://github.com/Guestly-V2-2/Music-Sound/raw/refs/heads/main/lv_0_20260104201553.mp3?raw=true",
		1,
		"FINALJUMP"
	)

	-- cleanup sound
	task.delay(30, function()
		if workspace:FindFirstChild("FINALJUMP") then
			workspace.FINALJUMP:Destroy()
		end
	end)
end)

-- ===== UPDATE LOOP =====
local startTime = tick()
local conn

conn = RunService.RenderStepped:Connect(function()
	local elapsed = tick() - startTime

	local a1 = math.clamp(elapsed / FADE_MAIN, 0, 1)
	local a2 = math.clamp(elapsed / FADE_SUB, 0, 1)

	-- IMAGE FADE
	img1.ImageTransparency = a1
	img2.ImageTransparency = a2

	-- ENV FADE (THEO áº¢NH 1)
	cc.Brightness = -0.3 * (1 - a1)
	cc.Contrast = 1 * (1 - a1)

	-- SHAKE IMAGE 1 (Máº NH)
	local x1 = math.random(-SHAKE_MAIN, SHAKE_MAIN)
	local y1 = math.random(-SHAKE_MAIN, SHAKE_MAIN)
	img1.Position = UDim2.fromScale(0.5, 0.5) + UDim2.fromOffset(x1, y1)

	-- SHAKE IMAGE 2 (NHáº¸)
	local x2 = math.random(-SHAKE_SUB, SHAKE_SUB)
	local y2 = math.random(-SHAKE_SUB, SHAKE_SUB)
	img2.Position = UDim2.fromScale(0.5, 0.95) + UDim2.fromOffset(x2, y2)

	-- END
	if elapsed >= FADE_SUB then
		conn:Disconnect()
		_G.JumpScareActive = false

		gui:Destroy()
		cc:Destroy()

		for k, v in pairs(original) do
			Lighting[k] = v
		end
	end
end)

---====== Load spawner ======---

local spawner = loadstring(game:HttpGet("https://raw.githubusercontent.com/RegularVynixu/Utilities/main/Doors/Entity%20Spawner/V2/Source.lua"))()

---====== Create entity ======---

local entity = spawner.Create({
	Entity = {
		Name = "Torness",
		Asset = "https://github.com/Guestly-V2-2/Models/raw/refs/heads/main/smile.rbxm",
		HeightOffset = 0
	},
	Lights = {
		Flicker = {
			Enabled = false,
			Duration = 5
		},
		Shatter = false,
		Repair = false
	},
	Earthquake = {
		Enabled = false
	},
	CameraShake = {
		Enabled = true,
		Range = 150,
		Values = {3, 3, 6, 6} -- Magnitude, Roughness, FadeIn, FadeOut
	},
	Movement = {
		Speed = 150,
		Delay = 5,
		Reversed = false
	},
	Rebounding = {
		Enabled = true,
		Type = "Ambush", -- "Blitz"
		Min = 2,
		Max = 2,
		Delay = 1
	},
	Damage = {
		Enabled = true,
		Range = 40,
		Amount = 0.01
	},
	Crucifixion = {
		Enabled = false,
		Range = 40,
		Resist = false,
		Break = true
	},
	Death = {
		Type = "Guiding", -- "Curious"
		Hints = {"-. --- .-- .- -.. .- -.-- ... --..-- / . ...- . .-. -.-- --- -. . / .-- .- -. - ... / - --- / .--. .-.. .- -.-- .-.-.-", "- .... . -.-- / .-- .- -. - / .--- --- -.-- ... / .- -. -.. / .... .- .--. .--. .. -. . ... ... .-.-.-", "- .... . -.-- / .-- .- -. - / --. --- --- -.. / .-.. .. ..-. . ... / .- -. -.. / --. --- --- -.. / - .... .. -. --. ... .-.-.-", "-... ..- - / -.. --- / -.-- --- ..- ..--.."},
		Cause = ""
	}
})

---====== Debug entity ======---

entity:SetCallback("OnSpawned", function()
    print("Entity has spawned")
end)

entity:SetCallback("OnStartMoving", function()
    print("Entity has started moving")
end)

entity:SetCallback("OnEnterRoom", function(room, firstTime)
    if firstTime == true then
        print("Entity has entered room: ".. room.Name.. " for the first time")
    else
        print("Entity has entered room: ".. room.Name.. " again")
    end
end)

entity:SetCallback("OnLookAt", function(lineOfSight)
	if lineOfSight == true then
		print("Player is looking at entity")
	else
		print("Player view is obstructed by something")
	end
end)

entity:SetCallback("OnRebounding", function(startOfRebound)
    if startOfRebound == true then
        print("Entity has started rebounding")
	else
        print("Entity has finished rebounding")
	end
end)

entity:SetCallback("OnDespawning", function()
    print("Entity is despawning")
end)

entity:SetCallback("OnDespawned", function()
    print("Entity has despawned")
end)

entity:SetCallback("OnDamagePlayer", function(newHealth)
	if newHealth == 0 then
		print("Entity has killed the player")
	else
		print("Entity has damaged the player")
--// JUMPSCARE SCRIPT FOR EXECUTOR
--// ImageId: IMAGE_ID_HERE

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

--// BACKUP STATE
local oldAnchored = root.Anchored
local oldWalkSpeed = humanoid.WalkSpeed
local oldJumpPower = humanoid.JumpPower

--// LOCK MOVEMENT
root.Anchored = true
humanoid.WalkSpeed = 0
humanoid.JumpPower = 0

--// GUI
local gui = Instance.new("ScreenGui")
gui.Name = "JumpScareGui"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local image = Instance.new("ImageLabel")
image.Parent = gui
image.BackgroundTransparency = 1
image.AnchorPoint = Vector2.new(0.5, 0.5)
image.Position = UDim2.new(0.5, 0, 0.5, 0)
image.Size = UDim2.new(0.6, 0, 0.6, 0)
image.Image = "rbxassetid://140575828191525"
image.ScaleType = Enum.ScaleType.Fit

--// STATE
local running = true
local connections = {}

--// =========================
--// HOOK - SCRIPT PHá»¤
--// =========================
_G.OnJumpScareRunning = function()
  local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
	game.Lighting.MainColorCorrection.TintColor = Color3.fromRGB(0, 0, 0)
  wait(7)
game.Lighting.MainColorCorrection.TintColor = Color3.fromRGB(255, 255, 255)
humanoid:TakeDamage(100)

-- ================= DEATH HINT =================
firesignal(
    game.ReplicatedStorage.RemotesFolder.DeathHint.OnClientEvent,
    {
        "-. --- .-- .- -.. .- -.-- ... --..-- / . ...- . .-. -.-- --- -. . / .-- .- -. - ... / - --- / .--. .-.. .- -.-- .-.-.-",
        "- .... . -.-- / .-- .- -. - / --. --- --- -.. / .-.. .. ..-. . ... / .- -. -.. / --. --- --- -.. / - .... .. -. --. ... .-.-.-",
        "-... ..- - / -.. --- / -.-- --- ..- ..--.."
    },
    "Blue"
)

game.ReplicatedStorage.GameStats["Player_" .. player.Name]
    .Total.DeathCause.Value = "Torness"
end

pcall(function()
	if _G.OnJumpScareRunning then
		_G.OnJumpScareRunning()
	end
end)

--// SHAKE + DIZZY
local t = 0
connections[#connections+1] = RunService.RenderStepped:Connect(function(dt)
	if not running then return end
	t += dt * 10

	local shakeX = math.sin(t * 3) * 6
	local shakeY = math.cos(t * 2) * 6
	local rot = math.sin(t) * 4

	image.Position = UDim2.new(0.5, shakeX, 0.5, shakeY)
	image.Rotation = rot
end)

--// END AFTER 7s
task.delay(7, function()
	running = false

	-- restore movement
	pcall(function()
		root.Anchored = oldAnchored
		humanoid.WalkSpeed = oldWalkSpeed
		humanoid.JumpPower = oldJumpPower
	end)

	-- disconnect
	for _, c in ipairs(connections) do
		pcall(function() c:Disconnect() end)
	end

	_G.OnJumpScareRunning = nil

	pcall(function()
		gui:Destroy()
	end)
end)

	end
end)

--[[

DEVELOPER NOTE:
By overwriting 'CrucifixionOverwrite' the default crucifixion callback will be replaced with your custom callback.

entity:SetCallback("CrucifixionOverwrite", function()
    print("Custom crucifixion callback")
end)

]]--

---====== Run entity ======---

entity:Run()
